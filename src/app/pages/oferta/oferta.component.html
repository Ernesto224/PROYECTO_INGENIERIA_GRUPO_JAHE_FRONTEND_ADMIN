<div class="pagina animacion">

    <h2 class="titulo-pagina mth">Ofertas del hotel</h2>

    <div class="contenedor-modificar-tipo-habitacion">

        <div class="subcontenedor-modificar-tipo-habitacion">

            <div class="contanedor-tabla">

                <table mat-table [dataSource]="ofertasPaginadas()" class="w-full">

                    <ng-container matColumnDef="nombre">
                        <th mat-header-cell *matHeaderCellDef> Nombre </th>
                        <td mat-cell *matCellDef="let element"> {{ element.nombre }} </td>
                    </ng-container>

                    <ng-container matColumnDef="fechaInicio">
                        <th mat-header-cell *matHeaderCellDef> Fecha Inicio </th>
                        <td mat-cell *matCellDef="let element"> {{ element.fechaInicio | date:'yyyy-MM-dd' }} </td>
                    </ng-container>

                    <ng-container matColumnDef="fechaFin">
                        <th mat-header-cell *matHeaderCellDef> Fecha Final </th>
                        <td mat-cell *matCellDef="let element"> {{ element.fechaFinal | date:'yyyy-MM-dd' }} </td>
                    </ng-container>

                    <ng-container matColumnDef="porcentaje">
                        <th mat-header-cell *matHeaderCellDef> Porcentaje Descuento </th>
                        <td mat-cell *matCellDef="let element"> {{ element.porcentaje }}%</td>
                    </ng-container>

                    <ng-container matColumnDef="tipoDeHabitacion">
                        <th mat-header-cell *matHeaderCellDef> Tipo Habitación </th>
                        <td mat-cell *matCellDef="let element"> {{ element.tipoDeHabitacion.nombre }} </td>
                    </ng-container>

                    <ng-container matColumnDef="estado">
                        <th mat-header-cell *matHeaderCellDef> Estado </th>
                        <td mat-cell *matCellDef="let element">
                            <mat-slide-toggle [checked]="element.activo" (change)="onToggleActivo(element.idOferta)">
                            </mat-slide-toggle>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="acciones">
                        <th mat-header-cell *matHeaderCellDef> Editar </th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-icon-button color="primary" (click)="abrirModalModificarOferta(element)"
                                matTooltip="Modificar oferta">
                                <mat-icon>edit</mat-icon>
                            </button>
                        </td>
                    </ng-container>


                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                    <ng-container *matNoDataRow>
                        <tr class="mat-row">
                            <td class="mat-cell" [attr.colspan]="displayedColumns.length">
                                {{ isLoading ? 'Cargando...' : 'No hay registros' }}
                            </td>
                        </tr>
                    </ng-container>

                </table>

                <!-- Paginador -->
                <mat-paginator [length]="totalRegistros || 0" [pageSize]="maximoPorPagina"
                    [pageIndex]="paginaActual - 1" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
                    (page)="onPageChange($event)" aria-label="Seleccionar página">
                </mat-paginator>


            </div>

        </div>

    </div>

    <div *ngIf="modalModificarOferta" class="modal-overlay">
        <div class="modal-container">
            <app-modal-modificar-oferta [oferta]="ofertaSeleccionada" (cerrar)="cerrarFormularioModificar()">
            </app-modal-modificar-oferta>
        </div>
    </div>

</div>